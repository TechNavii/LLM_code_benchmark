foundation-001-validator-entrypoints: Created standardized validator scripts (lint.sh, typecheck.sh, test.sh) with virtualenv management, requirements-dev.txt, and brownfield-safe tool configurations (ruff, mypy) in pyproject.toml. All validators pass.
quality-001-formatting: Added ruff format configuration to pyproject.toml, integrated format check into lint.sh, created format.sh for developer auto-fix, and formatted 15 files. All validators pass.
quality-002-lint-static-analysis: Verified ruff linting configuration with E (pycodestyle) and F (pyflakes) rules, scoped to lintScope with targeted per-file ignores. Integrated into lint.sh. All validators pass.
quality-003-typecheck: Verified mypy type checking with brownfield-safe configuration in pyproject.toml, scoped to server/, harness/, tests/, and conftest.py. Fast and deterministic execution integrated into typecheck.sh. All validators pass.
tests-001-unit-test-harness: Added characterization tests for /health endpoint, root redirect, UI mount, and CORS middleware in test_api_endpoints.py. Verified existing tests for config parsing, validators, and progress managers. All tests hermetic and integrated into test.sh. 31 tests pass.
tests-002-critical-path-regression-suite: Created test_critical_paths.py with black-box smoke tests for server health, runs listing, leaderboard, task discovery, models capabilities, and OpenAPI schema. Suite runs in <2 seconds. 43 tests pass.
tests-003-integration-tests: Created test_integration.py with integration tests for database init/queries, filesystem persistence, and WebSocket streams via ProgressManager. Tests use real SQLite DB, tempdir for filesystem isolation, and asyncio for stream validation. All hermetic and fast. 48 tests pass.
tests-004-e2e-smoke: E2E smoke tests already implemented in test_api_endpoints.py. Tests exercise create_app(), verify /ui mount, /health endpoint, root redirect, and CORS middleware. Happy path focused, hermetic, and reproducible. All validators pass.
quality-004-coverage-reporting: Enabled pytest-cov with coverage tracking for server/ and harness/. Set baseline threshold to 24% (current coverage 24.35%). Added term-missing and HTML reports (htmlcov/). Coverage prevents regression and will be published in CI. All validators pass.
ci-001-quality-gates: Created GitHub Actions workflow (.github/workflows/quality-gates.yml) that runs lint, typecheck, and test validators on push and PR. Uses Python 3.11, caches pip and virtualenv for speed, fails on validator failures, uploads coverage to Codecov and artifacts. All validators pass.
security-001-dependency-vulnerability-scan: Added pip-audit scanning via scripts/security-scan.sh for all requirements files. Created .pip-audit-suppressions.txt with documented justifications for 3 transitive dependency CVEs. Added docs/SECURITY.md with remediation workflow. Integrated into CI workflow. All validators pass.
security-002-secret-scanning: Integrated Gitleaks for secret scanning via GitHub Actions workflow (.github/workflows/secret-scanning.yml). Created .gitleaks.toml with allowlist configuration. Updated docs/SECURITY.md with secret rotation process and best practices. Scans run on push and PR. Gitleaks does not log sensitive values. All validators pass.
quality-005-precommit-hooks: Added pre-commit framework configuration (.pre-commit-config.yaml) with ruff format/check, file validators, and gitleaks. Runs on staged files only for speed. Added pre-commit to requirements-dev.txt. Created docs/DEVELOPMENT.md with setup instructions. Hooks optional but consistent with CI. Cross-platform compatible. All validators pass.
foundation-002-dependency-lockfiles: Introduced pip-tools for deterministic dependency locking. Created .in source files (server/requirements.in, harness/requirements.in, requirements-dev.in) and generated .txt lock files with pinned transitive dependencies using pip-compile. Created scripts/compile-deps.sh to regenerate locks and scripts/check-deps.sh to verify locks are current. Updated .github/workflows/quality-gates.yml to check lock files in CI. All validators (lint, typecheck, test, check-deps) pass.
foundation-003-python-version-policy: Added Python 3.11+ requirement to pyproject.toml. Created scripts/check-python-version.sh with version validation and integrated preflight checks into all validator scripts (lint.sh, typecheck.sh, test.sh, format.sh, check-deps.sh, compile-deps.sh, security-scan.sh). Updated CI to test on Python 3.11 and 3.12 (cache keys already include python version). All validators pass.
quality-006-no-debug-output: Enabled ruff T201 rule to detect print() statements in Python code. Created scripts/check-console-log.sh to detect ungated console.log in GUI files (allows only DEBUG-gated usage). Integrated console.log check into lint.sh. No print() statements found in codebase; all console.log usage already properly gated behind DEBUG flag. CI will fail on any new ungated debug output. All validators pass.
quality-007-dead-code-and-import-hygiene: Added vulture (2.14) for dead-code detection with 80% confidence threshold. Created .vulture-allowlist.py with documented false positives (Pydantic cls parameters, SQLAlchemy Column imports, type hint imports, and one brownfield defaultdict import). Integrated vulture into lint.sh. All validators pass with high signal-to-noise ratio.
quality-008-frontend-quality-gates: Created scripts/check-frontend.sh with minimal lightweight checks for gui/ (balanced braces, debugger statements, var usage warnings, trailing whitespace warnings). Brownfield-safe with warnings instead of hard failures for formatting issues. Integrated into lint.sh. Fast execution without Node.js/npm dependencies. All validators pass.
tests-005-websocket-stream-contract: Created test_websocket_streams.py with 10 tests covering WebSocket stream contracts for /runs/{run_id}/stream and /qa/runs/{run_id}/stream endpoints. Tests verify event ordering (init -> attempt(s) -> complete/error), event shape, missing run_id handling (4404 close code), and cleanup via unsubscribe. Tests use fresh ProgressManager instances per test to ensure hermetic execution. All validators pass. 58 tests pass with 24.71% coverage.
tests-006-harness-retry-resume-tests: Created test_harness_retry_resume.py with 35 comprehensive unit tests for load_api_error_attempts, load_failed_attempts, and load_incomplete_attempts. Tests validate directory name parsing (task_id/model/sample/thinking_level), API error pattern detection (RateLimitError/EmptyResponseError/ProviderError/429), transient API error classification excluding user-code failures, JSON parsing from attempts.json/summary.json, and edge cases (invalid sample numbers, empty directories, multi-underscore models). All tests use tmp_path fixtures for hermetic execution. Suite is fast and does not run tasks/* tests. All validators pass. 93 tests pass with 26.87% coverage.
tests-007-database-utils-and-session-tests: Created test_database_utils.py with 32 unit tests for database utilities (parse_timestamp, extract_usage_tokens, count_errors_from_summary) and 3 integration tests for get_session transactional behavior. Unit tests validate timezone normalization (UTC conversion to naive datetime), fallback to current time on invalid input, OpenAI/Anthropic token extraction with precedence, malformed JSON handling (added AttributeError to except clause), and case-insensitive status matching. Integration tests validate get_session context manager, auto-commit on success, and rollback on exception. All tests use the actual database with unique IDs and cleanup. All validators pass. 125 tests pass with 27.27% coverage.
security-003-sast-bandit: Added Bandit 1.8.0 SAST scanning via scripts/bandit.sh. Created .bandit.yml config scoped to server/ and harness/ (excludes tests). Skipped low-value checks (B101 assert_used, B404 import subprocess, B603 subprocess shell=False). Found 2 medium-severity issues (B113 requests timeout false positive, B310 urlopen localhost-only). Added inline # nosec suppressions with justifications in server/routes/router.py:325 and harness/expert_questions/run_benchmark.py:354. Integrated into CI (.github/workflows/quality-gates.yml). Created docs/BANDIT.md with suppression policy and guidelines. Enforcement: fail on medium+ severity. All validators pass.
security-004-semgrep-lightweight: Added Semgrep 1.102.0 lightweight security scanning via scripts/semgrep.sh. Created .semgrep.yml with minimal ruleset (12 rules) covering Python (SQL injection, hardcoded secrets, eval/exec, pickle, shell injection, weak hashes) and JavaScript (eval, innerHTML XSS, document.write XSS, open redirect). Scoped to server/, harness/, and gui/ with exclusions for tasks/, runs/, .venv/. Found 13 WARNING-level findings in GUI (innerHTML usage, local redirect), all documented in .semgrep-suppressions.txt with justifications. Created docs/SEMGREP.md with configuration, suppression policy, and remediation workflow. Integrated into CI (.github/workflows/quality-gates.yml). Enforcement: fail on ERROR severity, report WARNING. Fast execution (<10s). All validators pass. 125 tests pass with 27.27% coverage.
ci-002-python-version-matrix: Verified CI already runs validators (lint, typecheck, test, security scans) across Python 3.11 and 3.12 matrix. Cache keys include both Python version and dependency lock hashes. Tasks/* suites excluded from default CI job via pytest.ini configuration. Added fail-fast: true to strategy to stop all jobs on first failure. CI provides clear failure reporting per Python version. All validators pass.
